@using Microsoft.AspNet.Identity
@model SiliconIndy.Models.LessonModels.LessonDetail

@{
    ViewBag.Title = "Details";
}

<div class="row">
    <div class="container">
        <div class="row display-section">
            <div class="col-md-12">
                <h1>Fix the Code for @Html.DisplayFor(model => model.Title)</h1>
                <p style="max-width:1000">
                    <table class="run">
                        <tbody>
                            <tr>
                                <td valign="top" width="550">
                                    <!-- CODE -->
                                    <textarea id="code1-ex2" rows="4" cols="70" class="tacode" spellcheck="false" onkeypress="return handleCR(this ,event)">@Html.DisplayFor(model => model.Content)</textarea>
                                    <br><input type="button" style="width:220;height:40;background-color:lightgray" value="Run" onclick="evaluateClear(&quot;code1-ex2&quot;)">
                                </td>
                                <td valign="top">
                                    <!-- OUTPUT -->
                                    <div id="code1-ex2-output" style="font-family:courier;font-size:14;"></div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </p><p>

                    <br />

                <p>
                    @Html.ActionLink("Back to List", "Index") |
                    @Html.ActionLink("Write a comment", "Create", "Comment", new { id = Model.LessonId }, null)
                </p>
            </div>
        </div>
    </div>
</div>

<div class="content">
    <div class="comments">
        <div class="editor">
            <div class="editor-header">
                <a href='#' data-role='bold'>B</a>
                <a href='#' data-role='italic'>I</a>
                <a href='#' data-role='underline'>U</a>
                <a href='#' data-role='justifyleft'><i class="menu-left"></i></a>
                <a href='#' data-role='justifycenter'><i class="menu-center"></i></a>
                <a href='#' data-role='justifyright'><i class="menu-right"></i></a>
            </div>
            <div id="text" class="editor-content" contenteditable>
                <p>Let's make a statement!</p>
                <p>This is an italicised sentence.</p>
                <p>Very important information.</p>
            </div>
        </div>
        <div class="insert-text">
            <span class="loading">Loading...</span>
            <span class="total-comment"></span>
            <p>
                <input type="submit" value="Comment" />
            </p>
        </div>
        <div class="list-comments">
            <div>Hello!</div>
            <div>My name's Tuan Linh.</div>
        </div>
    </div>
</div>

<div class="row">
    <div class="container">
        @foreach (var item in Model.Comments)
        {
            <div class="row review">
                <div class="col-md-12">
                    <h2>
                        @Html.DisplayFor(modelItem => item.UserName)
                    </h2>
                    <p>
                        @Html.DisplayFor(modelItem => item.CommentText)
                    </p>

                    @if (User.Identity.GetUserId() == item.UserId.ToString())
                    {
                        @Html.ActionLink("Edit", "Edit", "Comment", new { id = item.CommentId }, null)
                        @Html.ActionLink("Delete", "Delete", "Comment", new { id = item.CommentId }, null)
                    }
                </div>
            </div>
        }
    </div>
</div>

@section scripts{

    <script src="~/Scripts/comment-form.js"></script>
    
    <script>
        var editor = CodeMirror.fromTextArea(document.getElementById("code1-ex2"), {
            lineNumbers: true,
            mode: "text/x-csharp",
            matchBrackets: true
        });
    </script>
    }
